{
    "contents" : "---\ntitle: \"make_clean\"\nauthor: \"William Cheung\"\ndate: \"December 6, 2015\"\noutput: pdf_document\n---\n\n```{r}\nlibrary(\"readr\")\n\nsetwd(\"../clean_data\")\n\ngetwd()\n\n# reading in the files\nrankings_10 <- read.csv(\"../raw_data/rankings_10.csv\", header = FALSE)\nrankings_curr <- read.csv(\"../raw_data/rankings_curr.csv\", header = FALSE)\nplayers <- read.csv(\"../raw_data/players.csv\", header = FALSE)\n\n# naming the columns\nnames(rankings_10) <-c(\"date\", \"rank\", \"playerID\", \"points\") \nnames(rankings_curr) <-c(\"date\", \"rank\", \"playerID\", \"points\")\nnames(players) <- c(\"playerID\", \"first\", \"last\", \"hand\", \"dob\", \"country\")\n\n\nweeks_10 <- unique(grep(\"^2010\", rankings_10$date, value = TRUE)) #just weeks for 2010\nweeks_11 <- unique(grep(\"^2011\", rankings_10$date, value = TRUE)) #just weeks for 2011\nweeks_12 <- unique(grep(\"^2012\", rankings_10$date, value = TRUE)) #just weeks for 2012\nweeks_13 <- unique(grep(\"^2013\", rankings_10$date, value = TRUE)) #just weeks for 2013\nweeks_14 <- unique(grep(\"^2014\", rankings_10$date, value = TRUE)) #just weeks for 2014\nweeks_15 <- unique(grep(\"^2015\", rankings_10$date, value = TRUE)) #just weeks for 2015\n\n\nend_10 <- tail(weeks_10, n=1)\nend_11 <- tail(weeks_11, n=1)\nend_12 <- tail(weeks_12, n=1)\nend_13 <- tail(weeks_13, n=1)\nend_14 <- tail(weeks_14, n=1)\nend_15 <- tail(weeks_15, n=1)\n\nfirst_week_2010 <- subset(rankings_10, date == weeks_10[1])\nall_week1_2010 <- merge(first_week_2010, players, by = \"playerID\")\nhead(all_week1_2010[order(all_week1_2010$rank),], n = 100)\n\nsecond_week_2010 <- subset(rankings_10, date == weeks_10[2])\nall_week2_2010 <- merge(second_week_2010, players, by = \"playerID\")\nhead(all_week2_2010[order(all_week2_2010$rank),], n = 100)\n\n#final week of 2010, all the merged data\nlast_week_2010 <- subset(rankings_10, date == weeks_10[length(weeks_10)])\nall_lastweek_2010 <- merge(last_week_2010, players, by = \"playerID\")\nsorted_2010 <- head(all_lastweek_2010[order(all_lastweek_2010$rank),], n = 100)\nsorted_2010$date = NULL\nsorted_2010$hand = NULL\nwrite.csv(sorted_2010, file = \"2010_top100.csv\")\n\n#final week of 2011, all the merged data\nlast_week_2011 <- subset(rankings_10, date == weeks_11[length(weeks_11)])\nall_lastweek_2011 <- merge(last_week_2011, players, by = \"playerID\")\nsorted_2011 <- head(all_lastweek_2011[order(all_lastweek_2011$rank),], n = 100)\nsorted_2011$date = NULL\nsorted_2011$hand = NULL\nwrite.csv(sorted_2011, file = \"2011_top100.csv\")\n\n#final week of 2012, all the merged data\nlast_week_2012 <- subset(rankings_10, date == weeks_12[length(weeks_12)])\nall_lastweek_2012 <- merge(last_week_2012, players, by = \"playerID\")\nsorted_2012 <- head(all_lastweek_2012[order(all_lastweek_2012$rank),], n = 100)\nsorted_2012$date = NULL\nsorted_2012$hand = NULL\nwrite.csv(sorted_2012, file = \"2012_top100.csv\")\n\n#final week of 2013, all the merged data\nlast_week_2013 <- subset(rankings_10, date == weeks_13[length(weeks_13)])\nall_lastweek_2013 <- merge(last_week_2013, players, by = \"playerID\")\nsorted_2013 <- head(all_lastweek_2013[order(all_lastweek_2013$rank),], n = 100)\nsorted_2013$date = NULL\nsorted_2013$hand = NULL\nwrite.csv(sorted_2013, file = \"2013_top100.csv\")\n\n#final week of 2014, all the merged data\nlast_week_2014 <- subset(rankings_10, date == weeks_14[length(weeks_14)])\nall_lastweek_2014 <- merge(last_week_2014, players, by = \"playerID\")\nsorted_2014 <- head(all_lastweek_2014[order(all_lastweek_2014$rank),], n = 100)\nsorted_2014$date = NULL\nsorted_2014$hand = NULL\nwrite.csv(sorted_2014, file = \"2014_top100.csv\")\n\n#final week of 2014, all the merged data\nlast_week_2015 <- subset(rankings_10, date == weeks_14[length(weeks_15)])\nall_lastweek_2015 <- merge(last_week_2015, players, by = \"playerID\")\nsorted_2015 <- head(all_lastweek_2015[order(all_lastweek_2014$rank),], n = 100)\nsorted_2015$date = NULL\nsorted_2015$hand = NULL\nwrite.csv(sorted_2015, file = \"2015_top100.csv\")\n\n\n```\n\n",
    "created" : 1449445086678.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2527827146",
    "id" : "920C1406",
    "lastKnownWriteTime" : 1449456976,
    "path" : "~/Desktop/stats133/Tennis/clean_data/construct_clean_data.Rmd",
    "project_path" : "clean_data/construct_clean_data.Rmd",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 4,
    "source_on_save" : false,
    "type" : "r_markdown"
}